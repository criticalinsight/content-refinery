name = "content-refinery"
main = "src/worker.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Custom Domain Route
routes = [
    { pattern = "api.moecapital.com/*", zone_name = "moecapital.com" }
]

[triggers]
crons = ["*/5 * * * *", "0 5 * * *", "0 17 * * *"]

[observability]
enabled = true

[[durable_objects.bindings]]
name = "CONTENT_DO"
class_name = "ContentDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["ContentDO"]

[[vectorize]]
binding = "VECTOR_INDEX"
index_name = "refinery_signals"

[ai]
binding = "AI"


[vars]
# TELEGRAM_API_ID = "..." (set via secret)
# TELEGRAM_API_HASH = "..." (set via secret)
# TELEGRAM_BOT_TOKEN = "..." (set via secret)
# GEMINI_API_KEY = "..." (set via secret)
# BOARD_DO_URL = "..." (set via secret)
